version: 2

sources:
  - name: external
    description: External data sources (require validation)
    tables:
      - name: events
        description: Raw podcast event logs from JSON file
        config:
          external_location: "read_ndjson('{{ var(\"data_load_path\") }}/event_logs_*.json', filename=true, auto_detect=false, columns={'event_type': 'VARCHAR', 'user_id': 'VARCHAR', 'episode_id': 'VARCHAR', 'timestamp': 'VARCHAR', 'duration': 'VARCHAR'})"
          formatter: oldstyle
        columns:
          - name: event_type
            description: Type of user interaction (play, pause, seek, complete)
          - name: user_id
            description: Unique identifier for the user
          - name: episode_id
            description: Unique identifier for the episode
          - name: timestamp
            description: When the event occurred
          - name: duration
            description: Duration in seconds (for play/complete events only)
